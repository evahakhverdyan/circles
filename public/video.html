<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
          type="text/css">
    <link rel="stylesheet" href="assets/theme.css" type="text/css">
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
    <script src="https://simplewebrtc.com/latest-v3.js"></script>
</head>

<body>
<div class="py-5">
    <div class="container">
        <div class="row align-items-center justify-content-center">
            <div class="col-md-6 pb-3">
                <h1 class="display-4 text-center timer">05:00</h1>
                <div class="card">
                    <video style="width: 100%; min-height:300px;background-image: url('assets/video-placeholder.png');background-repeat:no-repeat;background-position:center center;" id="remoteVideos"></video>
                    <div id="localVideo" style="width: 100px; height: 100px; margin-top: -100px;"></div>
                    <div class="card-body">
                        <a href="#" onclick="return false;" class="btn btn-primary btn-lg btn-block continue">Хочу пообщаться еще 5 мин</a>
                        <a href="feedback.html" class="btn btn-block">Стоп!</a>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item h3">Константин Константинопольский</li>
                        <li class="list-group-item">Возраст: 38</li>
                        <li class="list-group-item">Статус: в поиске</li>
                        <li class="list-group-item">Цель: брак</li>
                        <li class="list-group-item">Образование: высшее</li>
                        <li class="list-group-item">О себе: пишу, читаю</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
</body>
<script>
    function zeroPad(d) {
        if (d < 10) {
            return "0" + d;
        }

        return d;
    }

    function displayClock(m, s) {
        document.querySelector('.timer').innerHTML = zeroPad(m)+':'+zeroPad(s);
    }

    function clockTick() {
        let  minutes = Math.floor(timeoutSec/60);
        let  seconds = timeoutSec-minutes*60;

        displayClock(
            minutes,
            seconds
        );

        if (timeoutSec <= 0) {
            window.location.href = 'feedback.html';
        }

        timeoutSec = timeoutSec - 1;
    }

    let  tickDelayMs = 1000;
    let  timeoutSec = 300;
    setInterval(clockTick, tickDelayMs);

    document.querySelector('.continue').addEventListener('click', function () {
        timeoutSec += 300;
    });

    let webrtc = new SimpleWebRTC({
        localVideoEl: 'localVideo',
        remoteVideosEl: 'remotesVideos',
        autoRequestMedia: true
    });

    webrtc.on('readyToCall', function () {
        webrtc.joinRoom('circles-test');
    });
</script>

</html>